function validate(e,t,d){return""!=e&&(""!=t&&""!=d)}function sanitize(e){let t=document.createElement("div");return t.innerHTML=e,t.innerText.trim()}function removeAllChilds(e){let t=e.lastChild;for(;t;)e.removeChild(t),t=e.lastChild}function showContent(e){let t=document.createElement("div");t.classList.add("card","shadow-sm","mb-3","col-12");let d=document.createElement("div");d.classList.add("row","no-gutters","border-bottom");let n=document.createElement("div");n.classList.add("col-md-4");let l=document.createElement("a");l.href=`recipe.php?id=${e.id}`;let a=document.createElement("img");a.classList.add("card-img-left","form-img"),a.setAttribute("src",RECIPE_IMG_FOLDER+e.image_path),a.setAttribute("alt",`Foto de ${e}`),l.appendChild(a),n.appendChild(l);let c=document.createElement("div");c.classList.add("col-md-8");let i=document.createElement("div");i.classList.add("card-body");let r=document.createElement("div");r.classList.add("border-bottom");let o=document.createElement("a");o.href=`recipe.php?id=${e.id}`;let s=document.createElement("h2");s.classList.add("card-title","font-weight-bold","text-dark"),s.innerText=e.title,o.appendChild(s),r.appendChild(o);let m=document.createElement("div");m.classList.add("row","card-text","mt-2");let p=document.createElement("div");p.classList.add("col-5");let u=document.createElement("h4");u.classList.add("ml-2"),u.innerText="Ingredientes";let h=document.createElement("ul");h.innerHTML=e.ingredients,p.appendChild(u),p.appendChild(h);let E=document.createElement("div");E.classList.add("col-7");let C=document.createElement("h4");C.classList.add("ml-2"),C.innerText="Pasos a seguir:";let v=document.createElement("ol");v.innerHTML=e.steps,E.appendChild(C),E.appendChild(v),m.appendChild(p),m.appendChild(E),i.appendChild(r),i.appendChild(m),c.appendChild(i),d.appendChild(n),d.appendChild(c);let g=document.createElement("div");g.classList.add("card-body");let L=document.createElement("div");L.classList.add("m-2"),L.innerText=e.comments,g.appendChild(L);let f=document.createElement("div");f.classList.add("card-footer","text-muted");let y=document.createElement("div");y.classList.add("row");let I=document.createElement("a");I.classList.add("col-6"),I.href="#",I.innerText=e.username;let x=document.createElement("div");x.classList.add("col-6","text-right");let T=document.createElement("small");return T.innerText=e.date,x.appendChild(T),y.appendChild(I),y.appendChild(x),f.appendChild(y),t.appendChild(d),t.appendChild(g),t.appendChild(f),t}const RECIPE_IMG_FOLDER="recipes_img/";document.getElementById("search-btn").addEventListener("click",function(e){e.preventDefault();let t=document.getElementById("search").value,d=document.getElementById("category").value,n=document.getElementById("feature").value;if(t=sanitize(t),validate(t,d,n)){removeAllChilds(document.getElementById("no-content"));let e=new XMLHttpRequest,l=`feature=${n}&category=${d}&search=${t}`;e.open("GET",`./search.php?${l}`),e.send(),e.onreadystatechange=function(){4==e.readyState&&e.status},e.onload=function(){let t=JSON.parse(e.responseText),d=document.getElementById("content");if(removeAllChilds(d),t.error){let e=document.createElement("p");e.innerText=t.error,document.getElementById("no-content").appendChild(e)}else for(let e=0;e<t.length;e++)d.appendChild(showContent(t[e]));document.getElementById("search").value="",document.getElementById("category").value="default",document.getElementById("feature").value="default"}}});